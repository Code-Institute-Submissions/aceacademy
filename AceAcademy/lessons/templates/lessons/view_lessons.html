{% extends 'index_gated.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load cloudinary %}

{%block content%}
<h1>Lessons:</h1>
<form method="GET">
    {{search_lesson|crispy}}
    <input type="submit" value="Search"/>
</form>
<ul>
    {% for lesson in lessons %}
        <li>
            {{lesson.title}} 
            {% cloudinary lesson.cover %}
            {% if request.user.is_staff %}
            <a href="{% url 'lesson_details' lesson_id=lesson.id %}">See more</a>
            <a href="{% url 'update_lesson' lesson_id=lesson.id %}">Edit</a>
            <a href="{% url 'delete_lesson' lesson_id=lesson.id %}">Delete</a>
            {%endif%}
        </li>
    {%endfor%}
</ul>
See no lessons? <a href="{% url 'create_lesson' %}">Create one!</a>
{%endblock%}